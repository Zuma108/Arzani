<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Talk to Arzani - AI Business Marketplace Assistant</title>
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/arzani-ai.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
  <meta name="csrf-token" content="">
  <meta name="api-token" content="">
  <meta name="user-id" content="">
</head>
<body class="bg-dark text-light">
  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
      <a class="navbar-brand" href="/">Arzani</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="/marketplace2">Marketplace</a></li>
          <li class="nav-item"><a class="nav-link" href="/business-valuation">Valuation</a></li>
          <li class="nav-item"><a class="nav-link active" href="/arzani-ai">Talk to Arzani</a></li>
          <li class="nav-item"><a class="nav-link" href="/profile">Profile</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <div class="container my-5">
    <div class="row">
      <div class="col-12">
        <h1 class="mb-4">Talk to Arzani</h1>
        
        <!-- Arzani AI Section -->
        <section id="arzani-ai" class="mt-5">
          <div class="row mb-4">
            <div class="col-lg-8">
              <h2>Arzani AI Assistant</h2>
              <p class="lead text-secondary">Get instant help with business valuations, legal questions, and financial advice through our multi-agent AI system.</p>
            </div>
            <div class="col-lg-4">
              <div class="d-flex justify-content-end align-items-center h-100">                <div class="d-flex align-items-center">
                  <div class="agent-avatar generalist-agent me-2" title="Generalist Agent">
                    <img src="/figma design exports/images.webp/arzani-icon-nobackground.png" alt="Arzani AI" style="width: 20px; height: 20px; object-fit: contain;" onerror="this.onerror=null; this.src='https://cdn-icons-png.flaticon.com/512/4616/4616734.png';">
                  </div>
                  <div class="agent-avatar broker-agent me-2" title="Broker Agent">
                    <i class="bi bi-building"></i>
                  </div>
                  <div class="agent-avatar legal-agent me-2" title="Legal Agent">
                    <i class="bi bi-file-text"></i>
                  </div>
                  <div class="agent-avatar finance-agent" title="Finance Agent">
                    <i class="bi bi-cash-coin"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <div class="card shadow-sm bg-dark border-secondary" style="background-color: var(--card-bg); border-color: var(--border-color);">
            <div class="card-body">
              <!-- Tabs for different interaction modes -->
              <ul class="nav nav-tabs" id="aiInteractionTabs" role="tablist">
                <li class="nav-item" role="presentation">
                  <button class="nav-link active bg-transparent text-light" id="chat-tab" data-bs-toggle="tab" data-bs-target="#chat" type="button" role="tab">Chat</button>
                </li>
                <li class="nav-item" role="presentation">
                  <button class="nav-link bg-transparent text-light" id="voice-tab" data-bs-toggle="tab" data-bs-target="#voice" type="button" role="tab">Voice</button>
                </li>
                <li class="nav-item" role="presentation">
                  <button class="nav-link bg-transparent text-light" id="form-tab" data-bs-toggle="tab" data-bs-target="#form" type="button" role="tab">Smart Form</button>
                </li>
              </ul>
              
              <!-- Tab content -->
              <div class="tab-content p-3" id="aiInteractionContent">
                <!-- Chat Interface -->
                <div class="tab-pane fade show active" id="chat" role="tabpanel">
                  <div class="chat-widget">
                    <div class="chat-messages" id="chatMessages">
                      <div class="message ai">
                        <div class="agent-avatar generalist-agent me-3">
                          <i class="bi bi-robot"></i>
                        </div>
                        <div class="message-content">
                          <div class="mb-1">
                            <span class="fw-medium text-light">Arzani Assistant</span>
                            <span class="agent-chip generalist-chip">Generalist</span>
                          </div>
                          <p class="mb-0">Hello! I'm Arzani AI, your business assistant. How can I help you today with business valuation, legal advice, or financial guidance?</p>
                        </div>
                      </div>
                      <!-- Messages will be dynamically added here -->
                    </div>
                    <div class="chat-input">
                      <textarea id="userMessage" placeholder="Type your message here..."></textarea>
                      <button id="sendMessage" class="btn">Send</button>
                    </div>
                  </div>

                  <!-- Typing indicator (hidden by default) -->
                  <div id="typingIndicator" class="message ai mt-2 d-none">
                    <div class="agent-avatar generalist-agent me-3">
                      <i class="bi bi-robot"></i>
                    </div>
                    <div class="message-content d-flex align-items-center" style="background: transparent; padding: 0.5rem 1rem;">
                      <div class="typing-indicator">
                        <span></span>
                        <span></span>
                        <span></span>
                      </div>
                    </div>
                  </div>
                </div>
                
                <!-- Voice Interface -->
                <div class="tab-pane fade" id="voice" role="tabpanel">
                  <div class="voice-recorder text-center">
                    <div class="recorder-status mb-3" id="recorderStatus">Click to start recording</div>
                    <button id="toggleRecording" class="voice-button btn btn-lg btn-outline-secondary rounded-circle p-4">
                      <i class="bi bi-mic-fill"></i>
                    </button>
                    <div class="mt-3">
                      <div class="progress" style="height: 5px; background-color: rgba(255,255,255,0.1);">
                        <div id="audioLevel" class="progress-bar" role="progressbar" style="width: 0%; background: var(--generalist-primary);"></div>
                      </div>
                    </div>
                    <div class="transcript mt-4" id="transcript">
                      <p class="text-center text-secondary">Your speech will appear here...</p>
                    </div>
                  </div>
                </div>
                
                <!-- Smart Form Interface -->
                <div class="tab-pane fade" id="form" role="tabpanel">
                  <form id="businessForm" class="smart-form">
                    <div class="form-step active" id="step1">
                      <h4>Business Information</h4>
                      <!-- Form validation alert placeholder -->
                      <div id="formAlertPlaceholder"></div>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>
    </div>
  </div>

  <!-- Simplified Cookie Consent Banner -->
  <div id="cookieConsentBanner" class="fixed bottom-0 left-0 right-0 bg-dark p-4 border-t border-secondary z-[100] hidden" style="--bs-bg-opacity: .9; backdrop-filter: blur(5px);">
      <div class="container d-flex flex-column flex-md-row align-items-center justify-content-between gap-3">
          <p class="text-sm text-light text-center text-md-start mb-3 mb-md-0">
              We use essential cookies to make our site work. With your consent, we may also use non-essential cookies to improve user experience and analyze website traffic. By clicking “Accept All,” you agree to our website's cookie use as described in our <a href="/cookies" class="text-primary text-decoration-none">Cookie Policy</a>.
          </p>
          <div class="d-flex flex-shrink-0 gap-2">
              <button id="acceptNecessary" class="btn btn-outline-secondary btn-sm">Accept Necessary</button>
              <button id="acceptAllCookies" class="btn btn-primary btn-sm">Accept All</button>
          </div>
      </div>
  </div>
  <script src="/js/bootstrap.bundle.min.js"></script>
  <script src="/js/a2a-chat-adapter.js"></script>
  <script src="/js/sequential-agent-ui.js"></script>
  <script src="/js/arzani-ai.js"></script>
  <!-- Include the cookie banner script -->
  <script src="/js/cookie-banner.js"></script>
</body>
</html>
