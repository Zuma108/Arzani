<!DOCTYPE html>
<h    <!-- Site CSS -->
    <link rel="stylesheet" href="/css/main.css">
    
    <!-- Loading screen CSS -->
    <link rel="stylesheet" href="/css/loading-icon.css">
    
    <!-- AI Assistant styling -->
    <link rel="stylesheet" href="/css/ai-chatbot.css">
    <link rel="stylesheet" href="/css/ai-animations.css";ng="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= typeof title !== 'undefined' ? title : 'Arzani Marketplace' %></title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    
    <!-- Font Awesome for AI assistant icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Add Inter font for the AI assistant button -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    
    <!-- Site CSS -->
    <link rel="stylesheet" href="/css/main.css">
    
    <!-- AI Assistant styling -->
    <link rel="stylesheet" href="/css/ai-chatbot.css">
    <link rel="stylesheet" href="/css/ai-animations.css">
    
    <!-- Page-specific CSS if needed -->
    <% if (typeof pageCss !== 'undefined') { %>
        <link rel="stylesheet" href="/css/<%= pageCss %>.css">
    <% } %>
    
    <!-- Font Awesome fallback styles -->
    <style>
      .fa-regular.fa-xmark::before { content: "Ã—"; }
      .fa-regular.fa-search::before { content: "ğŸ”"; }
      .fa-regular.fa-store::before { content: "ğŸª"; }
      .fa-regular.fa-calculator::before { content: "ğŸ§®"; }
      .fa-regular.fa-lightbulb::before { content: "ğŸ’¡"; }
      .fa-regular.fa-trash-can-xmark::before { content: "ğŸ—‘ï¸"; }
      .fa-regular.fa-paperclip::before { content: "ğŸ“"; }
      .fa-regular.fa-paper-plane-top::before { content: "ğŸ“¤"; }
      .fa-regular.fa-circle-star::before { content: "â­"; }
      .fa-regular.fa-sparkles::before { content: "âœ¨"; }
    </style>
    
    <!-- Authentication token (if available) -->
    <% if (locals.user && locals.user.token) { %>
    <meta name="auth-token" content="<%= locals.user.token %>">
    <% } %>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-container">
        <div class="loading-content">
            <img src="/images/arzani-logo-black.png" alt="Arzani" class="loading-logo">
            <div class="loading-spinner"></div>
            <div class="loading-text">Loading...</div>
        </div>
    </div>
    
    <!-- Header/Navbar goes here -->
    
    <!-- Main content -->
    <main>
        <%- body %>
    </main>
    
    <!-- Footer -->
    <footer>
        <!-- Footer content here -->
    </footer>
    
    <!-- Unified Authentication JS (load before other scripts) -->
    <!-- REMOVED: auth-unified.js - deleted as part of auth system cleanup -->
    <script src="/js/auth.js"></script>
    <script src="/js/oauth-handler.js"></script>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>
    
    <!-- Include the AI Assistant component on all pages -->
    <%- include('ai-chatbot') %>
    
    <!-- AI Assistant script -->
    <script src="/js/ai-assistant.js"></script>
    
    <!-- Loading manager script -->
    <script src="/js/loading.js"></script>
    
    <!-- Page-specific scripts if needed -->
    <% if (typeof pageScript !== 'undefined') { %>
        <script src="/js/<%= pageScript %>.js"></script>
    <% } %>
</body>
</html>
