<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %> | Arzani</title>
    <meta name="description" content="Preview and approve AI-generated blog content">
    
    <link rel="icon" href="/figma design exports/images.webp/arzani-icon-nobackground.png" type="image/png">
    <link rel="stylesheet" href="/css/modern.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#316FD4',
                        dark: '#141414',
                        'dark-light': '#1E1E1E'
                    },
                    fontFamily: {
                        'sans': ['Inter', 'sans-serif']
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-dark text-white font-sans">
    <div class="page-wrapper">
        <header class="bg-dark-light/80 border-b border-gray-800 py-4">
            <div class="container mx-auto px-4 md:px-6">
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <img src="/figma design exports/logos/white-arzani-logo.svg" alt="Arzani Logo" class="h-8">
                        <span class="ml-4 text-lg font-medium">Blog Approval System</span>
                    </div>
                </div>
            </div>
        </header>

        <main class="py-12">
            <div class="container mx-auto px-4 md:px-6">
                <div class="max-w-4xl mx-auto">
                    <div class="bg-dark-light/40 backdrop-blur-sm border border-gray-800 rounded-xl p-6 md:p-8 mb-8">
                        <h1 class="text-2xl md:text-3xl font-bold mb-2"><%= post.title %></h1>
                        <p class="text-gray-400 mb-6">
                            Generated by Gemini AI on <%= new Date(post.generatedAt).toLocaleDateString('en-GB', { 
                                day: 'numeric', 
                                month: 'long', 
                                year: 'numeric', 
                                hour: '2-digit', 
                                minute: '2-digit' 
                            }) %>
                        </p>
                        
                        <div class="flex gap-4 mb-8">
                            <a href="/blog-approval/approve?id=<%= id %>&token=<%= token %>" class="btn-primary">
                                Approve Content
                            </a>
                            <a href="/blog-approval/reject?id=<%= id %>&token=<%= token %>" class="px-4 py-2 rounded-lg bg-red-500/20 hover:bg-red-500/30 text-red-500 border border-red-500/30 transition-colors">
                                Reject Content
                            </a>
                        </div>
                        
                        <div class="prose prose-invert prose-lg max-w-none border-t border-gray-800 pt-8">
                            <div id="content-preview">
                                <!-- We'll convert markdown to HTML on the client side -->
                                <div class="skeleton-loading">
                                    <div class="h-6 bg-gray-800 rounded w-3/4 mb-4"></div>
                                    <div class="h-6 bg-gray-800 rounded w-1/2 mb-4"></div>
                                    <div class="h-4 bg-gray-800 rounded w-full mb-2"></div>
                                    <div class="h-4 bg-gray-800 rounded w-full mb-2"></div>
                                    <div class="h-4 bg-gray-800 rounded w-5/6 mb-6"></div>
                                    
                                    <div class="h-6 bg-gray-800 rounded w-1/3 mb-4"></div>
                                    <div class="h-4 bg-gray-800 rounded w-full mb-2"></div>
                                    <div class="h-4 bg-gray-800 rounded w-full mb-2"></div>
                                    <div class="h-4 bg-gray-800 rounded w-4/5 mb-6"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex gap-4 justify-center">
                        <a href="/blog-approval/approve?id=<%= id %>&token=<%= token %>" class="px-6 py-3 rounded-lg bg-green-600 hover:bg-green-700 text-white transition-colors font-medium">
                            Approve Content
                        </a>
                        <a href="/blog-approval/reject?id=<%= id %>&token=<%= token %>" class="px-6 py-3 rounded-lg bg-red-600 hover:bg-red-700 text-white transition-colors font-medium">
                            Reject Content
                        </a>
                    </div>
                </div>
            </div>
        </main>

        <footer class="bg-black py-6 border-t border-gray-800">
            <div class="container mx-auto px-4 md:px-6 text-center">
                <p class="text-gray-400 text-sm">
                    Â© <%= new Date().getFullYear() %> Arzani. All rights reserved.
                </p>
            </div>
        </footer>
    </div>

    <!-- Import the Marked library for markdown parsing -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get the content element
            const contentPreview = document.getElementById('content-preview');
            
            // Parse the Markdown content
            const rawContent = "<%= post.rawContent.replace(/`/g, '\\`').replace(/\$/g, '\\$').replace(/\n/g, '\\n') %>";
            const htmlContent = marked.parse(rawContent);
            
            // Replace the skeleton loading with the actual content
            contentPreview.innerHTML = htmlContent;
        });
    </script>
</body>
</html>
